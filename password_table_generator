import random
import string


# Function that generates a random password based on the length that is set
def generate_password(length):
    ### characterList = string.ascii_letters + string.digits + string.punctuation
    characterList = string.ascii_letters
    password = ''.join(random.choice(characterList) for i in range(length))

    return password


# Function that appends new passwords to the list and skips duplicate passwords that were generated
def append_unique(password):

    # Try to open the file
    try:
        with open('passwordlist.txt') as passFile:
            existing_lines = set(passFile.read().splitlines())
    except FileNotFoundError:
        existing_lines = set()  # File doesn't exist, start with an empty set


    # Check if password is unique
    if password not in existing_lines:
        with open('passwordlist.txt', 'a') as passFile:
            passFile.write(password + '\n')
        print(f"Data appended: {password}")
    else:
        print(f"Duplicate not appended: {password}")



# Choose how many passwords you would like to generate.
# Duplicates will be ignored and unique generations will be
# appended to the text file.

# Splash screen and instructions
print("+---------------------------------------------------------------------+")
print("|  Password list generator! Input 'exit' to quit out of the program.  |")
print("+---------------------------------------------------------------------+")

while True:
    # Get input from user
    length = input("How long do you want each password to be? ")
    if length == 'exit':
        break
    numberOfPasswords = input("How many passwords would you like to generate? ")
    if numberOfPasswords == 'exit':
        break

    # Use input validation to check users options before continuing
    try:
        i = 0
        while i < int(numberOfPasswords):
            # Generate new password
            password = generate_password(int(length))

            # Append if password is unique
            append_unique(password)

            # Iterate the while loop
            i += 1
    except ValueError:
        print("Please input integers for your answer and try again.")
